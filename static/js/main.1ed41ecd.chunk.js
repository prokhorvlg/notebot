(this.webpackJsonpnotebot=this.webpackJsonpnotebot||[]).push([[0],{46:function(e,t,n){},71:function(e,t,n){"use strict";n.r(t);var o=n(2),c=n.n(o),a=n(39),i=n.n(a),r=(n(46),n(10)),s=n.n(r),l=n(14),d=n(5),u=n(11),f=n(12),j=n(24),g=function(e){return e.length>0?parseInt(e[e.length-1].id)+1:0},b=function(e,t){return t.find((function(t){return t.id===e}))},h=function(e,t){return t.map((function(e){return e.id})).indexOf(e)},m=n(3),y=function(e){var t,n=e.selectCategory;t=-1===e.selectedCategory?" selected":"";return Object(m.jsx)("li",{children:Object(m.jsx)("a",{id:"category-all",href:"#",className:"category-all "+t,onClick:function(e){e.preventDefault(),n(-1)},children:"All Notes"})})},O=function(e){var t=e.category,n=e.changeCategory,c=e.deleteCategory,a=e.selectCategory,i=e.selectedCategory,r=e.categorySetMode,s=e.setCategorySetMode,l=e.changeNote,d=e.selectedNote,u=Object(o.useRef)(null);Object(o.useEffect)((function(){t.editMode&&u.current.focus()}),[t.editMode]);return t.editMode?Object(m.jsx)("li",{className:"category-item edit-mode"+(i===t.id?"selected":""),children:Object(m.jsx)("input",{id:"category-"+t.id,ref:u,placeholder:"Enter a category title.",className:"feature-input",onInput:function(e){return function(e){n(t.id,{name:e.target.value})}(e)},onKeyDown:function(e){return function(e){"Enter"===e.key&&e.target.blur()}(e)},onBlur:function(e){return function(e){""===e.target.value?c(t.id):(n(t.id,{name:e.target.value,editMode:!1}),a(t.id))}(e)},value:t.name})}):Object(m.jsx)("li",{className:"category-item link-mode "+(!0===r?"category-set-mode":""),children:Object(m.jsx)("a",{id:"category-"+t.id,ref:u,className:i===t.id?"selected":"",style:{color:t.color,borderColor:t.color,backgroundColor:t.color},href:"#",onClick:function(e){r?(l(d,{category:t.id}),s(!1),a(t.id)):a(t.id)},children:t.name})})},p=function(e){var t=e.categories,n=e.changeCategory,o=e.deleteCategory,c=e.selectCategory,a=e.selectedCategory,i=e.changeNote,r=e.selectedNote,s=e.categorySetMode,l=e.setCategorySetMode;return t?t.map((function(e,t){return Object(m.jsx)(O,{category:e,changeCategory:n,deleteCategory:o,selectCategory:c,selectedCategory:a,categorySetMode:s,setCategorySetMode:l,changeNote:i,selectedNote:r})})):null},v=n(29),x=(n(53),n(40)),C=n.n(x),N=function(e){var t=e.editColorMode,n=e.setEditColorMode,c=e.selectedCategory,a=e.selectedCategoryColor,i=(e.setSelectedCategoryColor,e.changeCategory),r=Object(v.b)("hex",a),s=Object(d.a)(r,2),l=s[0],u=s[1];Object(o.useEffect)((function(){-1!==c&&i(c,{color:l.hex})}),[l]);return Object(m.jsx)(C.a,{onOutsideClick:function(e){n(!1)},children:Object(m.jsx)("div",{className:"category-colorPicker "+(!0===t?"showing":"not-showing"),children:Object(m.jsx)(v.a,{width:250,height:100,color:l,onChange:u,hideHSV:!0,hideRGB:!0,hideHEX:!0,dark:!0})})})},k=function(e){var t=e.selectedCategory,n=e.selectedCategoryColor,o=e.changeCategory,c=e.deleteCategory,a=e.editColorMode,i=e.setEditColorMode;return Object(m.jsxs)("div",{style:{borderColor:n},className:"main-categories-controls "+(-1!==t?"showing":"not-showing"),children:[Object(m.jsxs)("a",{href:"#",onClick:function(e){e.preventDefault(),-1!==t&&o(t,{editMode:!0})},children:[Object(m.jsx)(u.a,{icon:f.a,color:n,className:"fa-link-icon",fixedWidth:!0}),"Edit title"]}),Object(m.jsxs)("a",{href:"#",onClick:function(e){e.preventDefault(),-1!==t&&(o(t,{editMode:!1}),!0===a?(console.log("Set"),i(!1)):i(!0))},children:[Object(m.jsx)(u.a,{icon:f.b,color:n,className:"fa-link-icon",fixedWidth:!0}),"Edit color"]}),Object(m.jsxs)("a",{href:"#",onClick:function(e){e.preventDefault(),-1!==t&&c(t)},children:[Object(m.jsx)(u.a,{icon:f.d,color:n,className:"fa-link-icon",fixedWidth:!0}),"Delete category"]})]})},w=function(e){var t=e.note,n=e.changeNote,c=e.deleteNote,a=e.selectNote,i=e.selectedNote,r=e.categories,s=Object(o.useRef)(null);Object(o.useEffect)((function(){t.editMode&&s.current.focus()}),[t.editMode]),Object(o.useEffect)((function(){i&&i===t.id&&n(t.id,{modified:(new Date).toLocaleString()})}),[t.contents,t.title]);return t.editMode?Object(m.jsx)("li",{className:"category-item edit-mode "+(i===t.id?"selected":""),children:Object(m.jsx)("input",{id:"note-"+t.id,ref:s,placeholder:"Enter a note title.",className:"feature-input",onInput:function(e){return function(e){n(t.id,{title:e.target.value})}(e)},onKeyDown:function(e){return function(e){"Enter"===e.key&&e.target.blur()}(e)},onBlur:function(e){return function(e){""===e.target.value?c(t.id):(n(t.id,{title:e.target.value,editMode:!1}),a(t.id))}(e)},value:t.title})}):t.visible?Object(m.jsx)("li",{className:"note-title link-mode "+(i===t.id?"selected":""),children:Object(m.jsxs)("a",{href:"#",onClick:function(e){a(t.id)},children:[Object(m.jsx)("div",{className:"note-title-color",style:{backgroundColor:b(t.category,r).color}}),Object(m.jsxs)("div",{className:"note-title-box",children:[Object(m.jsx)("h2",{children:t.title}),Object(m.jsx)("p",{children:Object(m.jsx)(j.a,{date:t.modified,formatter:function(e,t,n){if("second"===t)return"just now";var o=1!==e?"s":"";return"".concat(e," ").concat(t).concat(o," ").concat(n)}})})]})]})}):null},S=function(e){var t=e.notes,n=e.changeNote,o=e.deleteNote,c=e.selectNote,a=e.selectedNote,i=e.categories;return[].concat(t).sort((function(e,t){return new Date(t.modified)-new Date(e.modified)})).map((function(e,t){return Object(m.jsx)(w,{note:e,changeNote:n,deleteNote:o,selectNote:c,selectedNote:a,categories:i})}))},M=n(41),E=function(e){var t=e.selectedNote,n=e.notes,o=e.changeNote;return null!==t?Object(m.jsx)(M.a,{value:b(t,n).contents,apiKey:"nacx0iqah4xpy7tb8prkc3hy42bdva4exnbaurkyumhwg0f2",init:{menubar:!1,plugins:["advlist autolink lists link image","charmap print preview anchor help","searchreplace visualblocks code","insertdatetime media table paste wordcount"],toolbar:"undo redo | formatselect | bold italic |             alignleft aligncenter alignright |             bullist numlist outdent indent | help",forced_root_block_attrs:{class:"editor-font",style:"font-family: Inter;"}},onEditorChange:function(e,n){o(t,{contents:e}),console.log(e)}}):null},D=[{id:0,name:"Personal",color:"#00ff84",editMode:!1},{id:1,name:"Work",color:"#ffb322",editMode:!1},{id:2,name:"Miscellaneous",color:"#16ecff",editMode:!1}],I=[{id:0,title:"Welcome!",category:0,modified:new Date("January 30, 2021 06:15:30").toLocaleString(),contents:'<h2 class="editor-font" style="font-family: Inter;">Hey there, visitor!</h2>\n<p class="editor-font" style="font-family: Inter;">This is a demo for a simple React note-taking application.</p>\n<p class="editor-font" style="font-family: Inter;">The demo is not intended for serious use. <strong>Your changes will not persist.</strong></p>\n<p class="editor-font" style="font-family: Inter;">Created with love by <span style="text-decoration: underline;">@prokhorvlg (Valentin Sigalov)</span>!</p>',editMode:!1,visible:!1},{id:1,title:"Area 51 vacation plans",category:0,modified:new Date("June 26, 2021 12:15:30").toLocaleString(),contents:'<p class="editor-font" style="font-family: Inter;">Contents of a note.</p>',editMode:!1,visible:!1},{id:2,title:"Funniest joke ever",category:0,modified:new Date("June 29, 2021 23:15:30").toLocaleString(),contents:'<p class="editor-font" style="font-family: Inter;">Contents of a note.</p>',editMode:!1,visible:!1},{id:3,title:"Lol tech specs",category:1,modified:new Date("July 3, 2021 09:15:30").toLocaleString(),contents:'<p class="editor-font" style="font-family: Inter;">Contents of a note.</p>',editMode:!1,visible:!1},{id:4,title:"Cats on the moon",category:2,modified:new Date("July 4, 2021 05:15:30").toLocaleString(),contents:'<p class="editor-font" style="font-family: Inter;">Contents of a note.</p>',editMode:!1,visible:!1}],L=n(8),B=function(e,t,n){var a=Object(o.useState)(-1),i=Object(d.a)(a,2),r=i[0],s=i[1],l=Object(o.useState)([]),u=Object(d.a)(l,2),f=u[0],j=u[1],m=Object(o.useState)("#ffffff"),y=Object(d.a)(m,2),O=y[0],p=y[1];c.a.useEffect((function(){-1!==r&&p(b(r,f).color)}),[r,f]);var v=function(){var e={id:g(f),name:"",color:function(){var e=["#91aaff","#ff9e9e","#ff80c5","#7afbff","#8aff9c"];return e[Math.floor(Math.random()*e.length)]}(),editMode:!0};j((function(t){return[].concat(Object(L.a)(t),[e])}))},x=function(e,t){var n=b(e,f),o=Object.assign(n,t),c=Object(L.a)(f);c[h(e,f)]=o,j(c)};return c.a.useEffect((function(){f.length&&t(f,"categories",x)}),[f]),[r,f,j,O,p,function(){v()},x,function(e){s(e)},function(t){if(1!==f.length){var o=Object(L.a)(f),c=h(t,f);o.splice(c,1),j(o),s(-1),n(t,"categories"),e(t)}}]},J=function(e,t,n,a){var i=Object(o.useState)(null),r=Object(d.a)(i,2),s=r[0],l=r[1],u=Object(o.useState)([]),f=Object(d.a)(u,2),j=f[0],m=f[1],y=function(){var n=g(j),o={id:n,title:"",category:-1!==t?t:e[0].id,modified:(new Date).toLocaleString(),contents:"",selected:!1,editMode:!0,visible:!0};return m((function(e){return[].concat(Object(L.a)(e),[o])})),n},O=function(e,t){var n=b(e,j),o=Object.assign(n,t),c=Object(L.a)(j);c[h(e,j)]=o,m(c)};return c.a.useEffect((function(){n(j,"notes",O)}),[j]),[s,j,m,function(){y()},O,function(e){l(e)},function(e){var t=Object(L.a)(j),n=h(e,j);t.splice(n,1),m(t),l(null),a(e,"notes")}]},P=n(30);n(72);P.a.initializeApp({apiKey:"AIzaSyDdCjbP7lQVb7--7uraYnkEdLGjWTmWckE",authDomain:"notebot-42.firebaseapp.com",databaseURL:"https://notebot-42.firebaseio.com",projectId:"notebot-42",storageBucket:"notebot-42.appspot.com",messagingSenderId:"884273569921",appId:"1:884273569921:web:e56bf1258d353e4ae02d80",measurementId:"G-7B4K7B82XL"});var R=P.a,W=function(){var e=Object(o.useState)(""),t=Object(d.a)(e,2),n=t[0],c=t[1],a=function(){var e=Object(l.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=r())||""===t||!u){e.next=6;break}return c(t),e.abrupt("return",[t,!0]);case 6:return e.abrupt("return",f().then((function(e){return c(e),i(e),[e,!1]})));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i=function(e){var t=new URLSearchParams(window.location.search);t.set("user",e.toString()),window.history.replaceState(null,null,window.location.toString()+"?"+t.toString())},r=function(){return new URLSearchParams(window.location.search).get("user")},u=function(){var e=Object(l.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",R.firestore().collection("users").doc(t.toString()).get().then((function(e){return e.exists})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",R.firestore().collection("users").add({categories:[],notes:[]}).then((function(e){return e.id})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return[n,a,function(e,t,o){if(n&&e){var c=R.firestore().collection("users").doc(n);e.forEach((function(e){c.collection(t).doc(e.id.toString()).set(e,{merge:!0})}))}},function(e,t){n&&R.firestore().collection("users").doc(n).collection(t).doc(e.toString()).delete()},function(){var e=Object(l.a)(s.a.mark((function e(t,n,o){var c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t&&(c=[],R.firestore().collection("users").doc(t).collection(n).get().then((function(e){e.docs.forEach((function(e){c=[].concat(Object(L.a)(c),[e.data()])}))})).then((function(){o(c)})));case 1:case"end":return e.stop()}}),e)})));return function(t,n,o){return e.apply(this,arguments)}}()]},A=function(){var e=W(),t=Object(d.a)(e,5),n=t[0],a=t[1],i=t[2],r=t[3],g=t[4],h=B((function(e){q.forEach((function(t){t.category===e&&te(t.id)}))}),i,r),O=Object(d.a)(h,9),v=O[0],x=O[1],C=O[2],w=O[3],M=O[4],L=O[5],P=O[6],R=O[7],A=O[8],F=Object(o.useState)(!1),K=Object(d.a)(F,2),T=K[0],G=K[1],H=Object(o.useState)(!1),U=Object(d.a)(H,2),V=U[0],_=U[1],z=J(x,v,i,r),X=Object(d.a)(z,7),Y=X[0],q=X[1],Q=X[2],Z=X[3],$=X[4],ee=X[5],te=X[6];c.a.useEffect((function(){function e(){return(e=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("totally only running once lol"),a().then((function(e){var t=Object(d.a)(e,2),n=t[0],o=t[1];return console.log(o),o?(console.log("grabbing collection!"),g(n,"categories",C)):C(D),[n,o]})).then((function(e){var t=Object(d.a)(e,2),n=t[0];t[1]?g(n,"notes",Q):Q(I)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var ne=Object(o.useState)(""),oe=Object(d.a)(ne,2),ce=oe[0],ae=oe[1];c.a.useEffect((function(){q.forEach((function(e){var t=e.category===v||-1===v,n=e.title.toLowerCase().includes(ce)||e.contents.toLowerCase().includes(ce)||""===ce;$(e.id,t&&n?{visible:!0}:{visible:!1})}))}),[n,ce,v]);var ie=Object(o.useState)(0),re=Object(d.a)(ie,2);re[0],re[1];return Object(m.jsxs)("div",{className:"app-container",children:[Object(m.jsxs)("div",{className:"main-column",children:[Object(m.jsxs)("div",{className:"main-logo",children:[Object(m.jsx)("div",{className:"box-logo"}),Object(m.jsx)("h1",{children:"Notebot"})]}),Object(m.jsxs)("div",{className:"main-categories",children:[Object(m.jsxs)("ul",{className:"main-categories-list",children:[Object(m.jsx)(y,{selectCategory:R,selectedCategory:v}),Object(m.jsx)(p,{categories:x,changeCategory:P,deleteCategory:A,selectCategory:R,selectedCategory:v,changeNote:$,selectedNote:Y,categorySetMode:T,setCategorySetMode:G})]}),Object(m.jsx)(N,{editColorMode:V,setEditColorMode:_,selectedCategory:v,selectedCategoryColor:w,setSelectedCategoryColor:M,changeCategory:P}),Object(m.jsx)(k,{selectedCategory:v,selectedCategoryColor:w,changeCategory:P,deleteCategory:A,editColorMode:V,setEditColorMode:_}),Object(m.jsx)("div",{className:"main-categories-add",children:Object(m.jsxs)("a",{href:"#",onClick:L,className:"feature-link",children:[Object(m.jsx)(u.a,{icon:f.c,className:"fa-link-icon"}),"Add category"]})})]})]}),Object(m.jsxs)("div",{className:"list-column",children:[Object(m.jsxs)("div",{className:"list-search-box",children:[Object(m.jsx)("h2",{children:"Search your notes"}),Object(m.jsx)("input",{className:"feature-input",onInput:function(e){return function(e){ae(e.target.value)}(e)}})]}),Object(m.jsx)("ul",{children:Object(m.jsx)(S,{notes:q,changeNote:$,deleteNote:te,selectNote:ee,selectedNote:Y,categories:x})}),Object(m.jsx)("div",{className:"list-notes-add",children:Object(m.jsxs)("a",{href:"#",onClick:Z,className:"feature-link",children:[Object(m.jsx)(u.a,{icon:f.c,className:"fa-link-icon"}),"Add note"]})})]}),Object(m.jsxs)("div",{className:"note-column",children:[Object(m.jsxs)("div",{className:"note-title-bar",children:[Object(m.jsx)("div",{className:"note-title-icon",style:{backgroundColor:null!==Y?b(b(Y,q).category,x).color:"white"}}),Object(m.jsxs)("div",{className:"note-title-container",children:[Object(m.jsx)("h3",{children:null!==Y?b(Y,q).title:"Select a note"}),null!==Y?Object(m.jsxs)("p",{children:[" edited ",Object(m.jsx)(j.a,{date:b(Y,q).modified,formatter:function(e,t,n){if("second"===t)return"just now";var o=1!==e?"s":"";return"".concat(e," ").concat(t).concat(o," ").concat(n)}}),", on ",b(Y,q).modified.toString()]}):Object(m.jsx)("p",{children:"No note selected."})]})]}),Object(m.jsx)("div",{className:"note-contents",children:Object(m.jsx)(E,{selectedNote:Y,notes:q,changeNote:$})}),Object(m.jsxs)("div",{className:"note-controls",children:[Object(m.jsxs)("a",{href:"#",className:"feature-link",onClick:function(e){return $(Y,{editMode:!0})},children:[Object(m.jsx)(u.a,{icon:f.c,className:"fa-link-icon"}),"Change title"]}),Object(m.jsxs)("a",{href:"#",className:"feature-link",onClick:function(e){return te(Y)},children:[Object(m.jsx)(u.a,{icon:f.c,className:"fa-link-icon"}),"Delete note"]}),Object(m.jsxs)("a",{href:"#",className:"feature-link",onClick:function(e){null!==Y&&G(!0)},children:[Object(m.jsx)(u.a,{icon:f.c,className:"fa-link-icon"}),"Change category"]})]})]})]})},F=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,73)).then((function(t){var n=t.getCLS,o=t.getFID,c=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),o(e),c(e),a(e),i(e)}))};i.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(A,{})}),document.getElementById("root")),F()}},[[71,1,2]]]);
//# sourceMappingURL=main.1ed41ecd.chunk.js.map